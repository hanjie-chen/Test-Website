{% extends "base.html"%}


{% block title %}
<title>{{ article.title }}</title>
{% endblock %}


{% block navbar%}
<!-- Navbar -->
<nav class="navbar navbar-expand-sm navbar-custom fixed-top">
    <div class="container">
        <div class="collapse navbar-collapse" id="mynavbar">
            <ul class="navbar-nav ms-auto">
                <!-- Home链接 -->
                <li class="nav-item">
                    <a href="{{ url_for('index')}}" class="nav-link">
                        Home
                    </a>
                </li>

                <!-- 分隔符 -->
                <li class="nav-item">
                    <span class="nav-link">|</span>
                </li>

                <!-- About Me链接 -->
                <li class="nav-item">
                    <a href="{{ url_for('article_index')}}" class="nav-link">
                        Articles
                    </a>
                </li>

                <li class="nav-item">
                    <span class="nav-link">|</span>
                </li>

                <li class="nav-item">
                    <a href="{{ url_for('about_me')}}" class="nav-link">
                        About Me
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
{% endblock %}

<!-- Main Content -->
{% block main_content%}
<main style="margin-top: 60px;"> <!-- Add top margin to prevent navbar overlap -->
    <div class="container">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <article>
                    <header class="mb-4">
                        <h1 class="fw-bolder mb-1">{{ article.title }}</h1>
                        <div class="text-muted fst-italic mb-2">
                            作者: {{ article.author }} | 发布日期: {{ article.rollout_date }}
                        </div>
                        <div class="badge bg-secondary text-decoration-none link-light">
                            {{ article.category }}
                        </div>
                    </header>

                    <!-- Article content -->
                    <div class="article-content">
                        <iframe id="article-iframe" src="{{ article_content_path }}"
                            style="width: 100%; height: 100%; border: none; overflow: hidden;" scrolling="no"></iframe>
                    </div>
                </article>
            </div>
        </div>
    </div>
</main>
{% endblock %}


{% block script %}
<!-- Improved iframe resize script -->
<script>
    function resizeIframe(obj) {
        // Add a small delay to ensure content is fully loaded
        setTimeout(function () {
            obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
        }, 100);
    }

    // Add event listener to handle dynamic content changes
    window.addEventListener('load', function () {
        var iframe = document.getElementById('article-iframe');
        resizeIframe(iframe);

        // Add resize listener to handle window size changes
        window.addEventListener('resize', function () {
            resizeIframe(iframe);
        });
    });
</script>
{% endblock %}